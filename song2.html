<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>House of Prayer – Audio Monitor</title>

<style>
:root{
  --bg:#0b1020;
  --panel:#16213e;
  --accent:#e94560;
  --text:#ffffff;
  --muted:#9aa4b2;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:var(--text);
}

.player{
  width:100%;
  max-width:420px;
  background:var(--panel);
  border-radius:18px;
  padding:24px;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
}

/* Header */
.header{
  text-align:center;
  margin-bottom:18px;
}
.header h1{
  font-size:1.1rem;
  margin:0;
}
.header p{
  margin:6px 0 0;
  font-size:.85rem;
  color:var(--muted);
}

/* Equalizer */
.equalizer{
  display:flex;
  justify-content:center;
  align-items:flex-end;
  gap:6px;
  height:70px;
  margin:20px 0;
}
.eq-bar{
  width:8px;
  height:12%;
  background:var(--accent);
  border-radius:6px 6px 0 0;
  transition:height .07s linear;
}

/* Controls */
.controls{
  display:flex;
  justify-content:center;
  margin-top:10px;
}
.play-btn{
  width:64px;
  height:64px;
  border-radius:50%;
  border:none;
  background:var(--accent);
  color:#fff;
  font-size:1.5rem;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

/* Footer */
.footer{
  text-align:center;
  margin-top:18px;
  font-size:.75rem;
  color:var(--muted);
}
</style>
</head>

<body>

<div class="player">
  <div class="header">
    <h1>Audio Monitor</h1>
    <p>House of Prayer · Live Signal</p>
  </div>

  <div class="equalizer" id="equalizer">
    <div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div>
    <div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div>
    <div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div>
    <div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div>
  </div>

  <div class="controls">
    <button class="play-btn" id="playBtn">▶</button>
  </div>

  <div class="footer">
    Signal visualization only · No processing
  </div>
</div>

<audio id="audio" src="https://pub-43e3b530db1540f4a16cdacc0e749843.r2.dev/temp-audios/%E0%B0%85%E0%B0%82%E0%B0%A6%E0%B0%BE%E0%B0%B2%20%E0%B0%A4%E0%B0%BE%E0%B0%B0_Audio.mp3"></audio>

<script>
const audio = document.getElementById("audio");
const playBtn = document.getElementById("playBtn");
const bars = document.querySelectorAll(".eq-bar");

let audioCtx, analyser, dataArray, source;
let playing = false;

function initAudio(){
  if(audioCtx) return;

  const AudioContext = window.AudioContext || window.webkitAudioContext;
  audioCtx = new AudioContext();

  source = audioCtx.createMediaElementSource(audio);
  analyser = audioCtx.createAnalyser();
  analyser.fftSize = 128;

  source.connect(analyser);
  analyser.connect(audioCtx.destination);

  dataArray = new Uint8Array(analyser.frequencyBinCount);
}

function animateEQ(){
  if(!analyser) return;

  analyser.getByteFrequencyData(dataArray);
  bars.forEach((bar,i)=>{
    const v = dataArray[i] || 0;
    bar.style.height = Math.max(10, v / 2) + "%";
  });

  requestAnimationFrame(animateEQ);
}

playBtn.addEventListener("click", async ()=>{
  initAudio();
  await audioCtx.resume();

  if(!playing){
    audio.play();
    playBtn.textContent = "⏸";
    playing = true;
    animateEQ();
  }else{
    audio.pause();
    playBtn.textContent = "▶";
    playing = false;
  }
});
</script>

</body>
</html>
